<tui-tree
    *ngFor="let item of data.children"
    [tuiTreeController]="true"
    [value]="item"
    [content]="content"
    [childrenHandler]="handler"
></tui-tree>

<ng-template
    #content
    let-item
>
    <tui-checkbox-labeled
        class="tui-space_vertical-2 tui-space_left-1"
        [ngModel]="item | tuiMapper: getValue:map"
        (ngModelChange)="onChecked(item, $event)"
    >
        {{ item.text }}
    </tui-checkbox-labeled>
</ng-template>
