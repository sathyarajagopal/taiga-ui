<div
    class="event-catcher"
    (tuiActiveZoneChange)="onActiveZone($event)"
    (mousedown)="onMouseDown($event)"
    (touchstart)="onTouchStart($event)"
>
    <div class="wrapper">
        <div
            *ngIf="segmented"
            class="segments"
        >
            <span
                *tuiRepeatTimes="let segmentIndex of segments + 1"
                automation-id="tui-slider__segment"
                class="segment"
            >
                <span
                    *ngIf="fromToTexts$ | async as fromToText"
                    class="number"
                >
                    {{ getSegmentPrefix(segmentIndex, fromToText) }}
                    {{ getSegmentLabel(segmentIndex) | tuiFormatNumber }}
                    <span *ngIf="pluralizeMap">
                        {{ getSegmentLabel(segmentIndex) | i18nPlural: pluralizeMap }}
                    </span>
                </span>
            </span>
        </div>
        <div
            automation-id="tui-slider__bar"
            class="bar"
            [style.left.%]="left"
            [style.right.%]="right"
        >
            <div
                #dotLeft
                automation-id="tui-slider__left"
                class="dot"
                [class.dot_focus-visible]="focusVisibleLeft && computedFocused"
                [tuiFocusable]="isLeftFocusable"
                (tuiFocusVisibleChange)="onLeftFocusVisible($event)"
                (keydown.arrowLeft.prevent)="decrement()"
                (keydown.arrowDown.prevent)="decrement()"
                (keydown.arrowRight.prevent)="increment()"
                (keydown.arrowUp.prevent)="increment()"
            ></div>
            <div
                #dotRight
                automation-id="tui-slider__right"
                class="dot"
                [class.dot_focus-visible]="focusVisibleRight && computedFocused"
                [tuiFocusable]="isRightFocusable"
                (tuiFocusVisibleChange)="onRightFocusVisible($event)"
                (keydown.arrowLeft.prevent)="decrement()"
                (keydown.arrowDown.prevent)="decrement()"
                (keydown.arrowRight.prevent)="increment()"
                (keydown.arrowUp.prevent)="increment()"
            ></div>
        </div>
    </div>
</div>
